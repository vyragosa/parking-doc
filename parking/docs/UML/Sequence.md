---
title: Sequence
sidebar_position: 4
---

# Сценарий Sequence диаграммы бронирования парковочного места

```plantuml
@startuml
actor Пользователь as user
participant "Система бронирования" as bookingSystem
participant "Сервис мониторинга свободных мест" as availabilityService
database "База данных парковочных мест" as parkingDB
participant "Сервис уведомлений" as notificationService

user -> bookingSystem: Запрос поиска парковочного места
bookingSystem -> availabilityService: Запросить доступные места

alt Доступные места найдены
    availabilityService -> bookingSystem: Список свободных парковочных мест
    bookingSystem -> user: Показать список доступных мест

    user -> bookingSystem: Выбор парковочного места и времени
    bookingSystem -> parkingDB: Проверить доступность выбранного места

    alt Место доступно
        parkingDB -> bookingSystem: Подтверждение доступности
        bookingSystem -> user: Место доступно, подтверждение бронирования?
        user -> bookingSystem: Подтвердить бронирование
        bookingSystem -> parkingDB: Забронировать место
        parkingDB -> bookingSystem: Подтверждение бронирования
        bookingSystem -> user: Успешное бронирование
    else Место занято
        parkingDB -> bookingSystem: Место занято
        bookingSystem -> user: Сообщение: место занято, выберите другое
    end

else Нет доступных мест
    availabilityService -> bookingSystem: Сообщить об отсутствии мест
    bookingSystem -> user: Нет доступных мест

    user -> bookingSystem: Запросить уведомление, когда место станет доступным
    bookingSystem -> notificationService: Добавить пользователя в список уведомлений
    notificationService -> bookingSystem: Подтверждение регистрации уведомления
    bookingSystem -> user: Подтверждение: уведомление будет отправлено
end

@enduml

```

---

1. Пользователь отправляет запрос на поиск свободных парковочных мест.
2. Система бронирования взаимодействует с сервисом мониторинга для получения списка доступных мест.
3. Возможные сценарии:
   - Если доступны свободные места:
     1. Список мест передается пользователю.
     2. Пользователь выбирает место и время.
     3. Система проверяет доступность выбранного места:
        - Если место доступно:
          - Система бронирует место.
          - Пользователь получает подтверждение.
        - Если место занято:
          - Система уведомляет пользователя о занятости.
   - Если свободных мест нет:
     1. Система уведомляет пользователя об отсутствии мест.
     2. Пользователь может запросить уведомление, когда место станет доступным.
4. Если уведомление запрошено:
   - Пользователь добавляется в список уведомлений через сервис уведомлений.
   - Система подтверждает регистрацию уведомления.
